<!DOCTYPE html>
<html lang="uk" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GlobalBus — Бронювання</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap');
        body { font-family: 'Roboto', sans-serif; }
        .ticket { box-shadow: 0 10px 35px rgba(0,0,0,0.08); border-radius: 16px; }
        .step-active { background:#1e40af; color:#fff; }
        .step { background:#e0e7ff; color:#1e3a8a; }
    </style>
</head>
<body class="bg-gray-50">
    <nav class="bg-white shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <a href="index.html#home" class="text-2xl font-bold text-blue-900">Global<span class="text-blue-600">Bus</span></a>
                <div class="hidden md:flex space-x-8">
                    <a href="index.html#about" class="text-gray-700 hover:text-blue-600 font-medium">Про нас</a>
                    <a href="trips.html" class="text-gray-700 hover:text-blue-600 font-medium">Маршрути</a>
                    <a href="index.html#reviews" class="text-gray-700 hover:text-blue-600 font-medium">Відгуки</a>
                    <a href="index.html#contact" class="text-gray-700 hover:text-blue-600 font-medium">Контакти</a>
                </div>
                <div class="hidden md:block">
                    <a href="index.html#booking" class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-full font-medium transition duration-300 shadow-lg hover:shadow-xl">Забронювати</a>
                </div>
                <div class="md:hidden">
                    <button id="menuBtn" class="text-gray-700 focus:outline-none"><i class="fas fa-bars text-2xl"></i></button>
                </div>
            </div>
            <div id="mobileMenu" class="hidden md:hidden bg-white py-6 px-6 fixed inset-0 shadow-lg border-t z-40 overflow-y-auto">
                <div class="flex flex-col space-y-4">
                    <a href="index.html#about" class="text-gray-800 text-lg hover:text-blue-600 font-medium">Про нас</a>
                    <a href="trips.html" class="text-gray-800 text-lg hover:text-blue-600 font-medium">Маршрути</a>
                    <a href="index.html#reviews" class="text-gray-800 text-lg hover:text-blue-600 font-medium">Відгуки</a>
                    <a href="index.html#contact" class="text-gray-800 text-lg hover:text-blue-600 font-medium">Контакти</a>
                    <a href="index.html#booking" class="mt-4 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-full font-semibold text-center">Забронювати</a>
                    <button id="closeMobileMenu" class="mt-6 text-gray-500">Закрити</button>
                </div>
            </div>
        </div>
    </nav>

    <header class="bg-blue-900 text-white py-10">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl md:text-4xl font-bold">Бронювання</h1>
            <p class="text-blue-200 mt-2">Завершіть бронювання в кілька простих кроків</p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-10">
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
            <!-- Steps -->
            <aside class="bg-white rounded-xl p-6 ticket h-max">
                <h3 class="text-lg font-bold mb-4">Кроки бронювання</h3>
                <div class="space-y-3">
                    <div class="flex items-center gap-3">
                        <div id="s1" class="w-8 h-8 rounded-full flex items-center justify-center font-bold step step-active">1</div>
                        <div>
                            <p class="font-semibold">Обрати рейс</p>
                            <p class="text-sm text-gray-500">Підтвердіть напрямок</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <div id="s2" class="w-8 h-8 rounded-full flex items-center justify-center font-bold step">2</div>
                        <div>
                            <p class="font-semibold">Обрати місця</p>
                            <p class="text-sm text-gray-500">Схема салону</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <div id="s3" class="w-8 h-8 rounded-full flex items-center justify-center font-bold step">3</div>
                        <div>
                            <p class="font-semibold">Дані пасажирів</p>
                            <p class="text-sm text-gray-500">Контакти та документи</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-3">
                        <div id="s4" class="w-8 h-8 rounded-full flex items-center justify-center font-bold step">4</div>
                        <div>
                            <p class="font-semibold">Оплата</p>
                            <p class="text-sm text-gray-500">Картка або Apple/Google Pay</p>
                        </div>
                    </div>
                </div>
            </aside>

            <!-- Ticket form -->
            <section class="lg:col-span-2 bg-white rounded-xl p-6 ticket">
                <!-- Step 1: confirm trip -->
                <div id="step1" class="space-y-5">
                    <div class="flex items-start justify-between">
                        <div>
                            <h3 class="text-xl font-bold text-gray-800" id="tripTitle">Маршрут</h3>
                            <p class="text-gray-600" id="tripTime">Час відправлення та прибуття</p>
                            <p class="text-gray-500" id="tripDuration">Тривалість: —</p>
                        </div>
                        <div class="text-right">
                            <p class="text-gray-500 text-sm">Вартість від</p>
                            <p class="text-2xl font-bold text-blue-600" id="tripPrice">— ₴</p>
                        </div>
                    </div>
                    <details class="bg-gray-50 p-4 rounded-lg">
                        <summary class="cursor-pointer text-blue-700 font-medium">Деталі поїздки</summary>
                        <div class="mt-3 text-gray-700 space-y-2">
                            <p id="tripBoarding"><span class="font-semibold">Посадка:</span> —</p>
                            <p id="tripArrival"><span class="font-semibold">Прибуття:</span> —</p>
                            <p id="tripStops"><span class="font-semibold">Зупинки:</span> —</p>
                            <p><span class="font-semibold">Багаж:</span> 1 місце до 20 кг + ручна поклажа до 5 кг</p>
                            <p><span class="font-semibold">Послуги на борту:</span> Wi‑Fi, кондиціонер, розетки</p>
                        </div>
                    </details>
                    <div class="pt-2">
                        <button id="toStep2" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition">Продовжити</button>
                    </div>
                </div>

                <!-- Step 2: seats -->
                <div id="step2" class="hidden space-y-4">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Оберіть місця</h3>
                    <div class="grid grid-cols-4 gap-3">
                        <button class="seat p-3 border rounded-lg" data-seat="1A">1A</button>
                        <button class="seat p-3 border rounded-lg" data-seat="1B">1B</button>
                        <button class="seat p-3 border rounded-lg" data-seat="1C">1C</button>
                        <button class="seat p-3 border rounded-lg" data-seat="1D">1D</button>
                        <button class="seat p-3 border rounded-lg" data-seat="2A">2A</button>
                        <button class="seat p-3 border rounded-lg" data-seat="2B">2B</button>
                        <button class="seat p-3 border rounded-lg" data-seat="2C">2C</button>
                        <button class="seat p-3 border rounded-lg" data-seat="2D">2D</button>
                        <button class="seat p-3 border rounded-lg" data-seat="3A">3A</button>
                        <button class="seat p-3 border rounded-lg" data-seat="3B">3B</button>
                        <button class="seat p-3 border rounded-lg" data-seat="3C">3C</button>
                        <button class="seat p-3 border rounded-lg" data-seat="3D">3D</button>
                    </div>
                    <button id="toStep3" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition">Далі</button>
                </div>

                <!-- Step 3: passengers -->
                <div id="step3" class="hidden space-y-4">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Дані пасажирів</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input id="pName" class="p-3 border rounded-lg" placeholder="ПІБ">
                        <input id="pPhone" class="p-3 border rounded-lg" placeholder="Телефон">
                        <input id="pEmail" class="p-3 border rounded-lg" placeholder="Email">
                        <input id="pDoc" class="p-3 border rounded-lg" placeholder="Номер паспорта">
                    </div>
                    <button id="toStep4" class="w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg font-medium transition">До оплати</button>
                </div>

                <!-- Step 4: payment -->
                <div id="step4" class="hidden space-y-4">
                    <h3 class="text-xl font-bold text-gray-800 mb-2">Оплата</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input class="p-3 border rounded-lg" placeholder="Номер картки">
                        <input class="p-3 border rounded-lg" placeholder="Ім'я на картці">
                        <input class="p-3 border rounded-lg" placeholder="MM/YY">
                        <input class="p-3 border rounded-lg" placeholder="CVV">
                    </div>
                    <button id="pay" class="w-full bg-green-600 hover:bg-green-700 text-white px-6 py-3 rounded-lg font-medium transition">Сплатити</button>
                </div>
            </section>
        </div>
    </main>

    <script>
    // Prefill from query params if present
    const url = new URL(window.location.href);
    const from = url.searchParams.get('from') || 'Київ';
    const to = url.searchParams.get('to') || 'Варшава';
    const start = url.searchParams.get('start') || '08:00';
    const end = url.searchParams.get('end') || '20:00';
    const price = url.searchParams.get('price') || '1100';
    const stops = url.searchParams.get('stops') || '';
    document.getElementById('tripTitle').textContent = `${from} → ${to}`;
    document.getElementById('tripTime').textContent = `${start} — ${end}`;
    document.getElementById('tripPrice').textContent = `${price} ₴`;
    if (stops) document.getElementById('tripStops').innerHTML = `<span class="font-semibold">Зупинки:</span> ${stops}`;
    // derive simple duration estimate if possible (HH:MM, allow +1)
    function parseTime(t){
        const plus = t.includes('+1');
        const [h,m] = t.replace('+1','').split(':').map(Number);
        return {h,m,plus};
    }
    const s = parseTime(start), e = parseTime(end);
    let durH = (e.h + (e.plus?24:0)) - s.h;
    let durM = e.m - s.m;
    if (durM < 0) { durH -= 1; durM += 60; }
    const durationText = isFinite(durH) ? `${durH} год ${durM ? durM + ' хв' : ''}`.trim() : '—';
    document.getElementById('tripDuration').textContent = `Тривалість: ${durationText}`;
    document.getElementById('tripBoarding').innerHTML = `<span class="font-semibold">Посадка:</span> ${from}, ${start}`;
    document.getElementById('tripArrival').innerHTML = `<span class="font-semibold">Прибуття:</span> ${to}, ${end}`;

    function showStep(n){
        ['step1','step2','step3','step4'].forEach((id,i)=>{
            document.getElementById(id).classList.toggle('hidden', i!==n-1);
        });
        ['s1','s2','s3','s4'].forEach((id,i)=>{
            const el = document.getElementById(id);
            el.classList.toggle('step-active', i===n-1);
            el.classList.toggle('step', i!==n-1);
        });
    }
    document.getElementById('toStep2').addEventListener('click', ()=> showStep(2));
    document.getElementById('toStep3').addEventListener('click', ()=> showStep(3));
    document.getElementById('toStep4').addEventListener('click', ()=> showStep(4));
    document.getElementById('pay').addEventListener('click', ()=>{
        // Success animation overlay
        const overlay = document.createElement('div');
        overlay.className = 'fixed inset-0 bg-black/50 flex items-center justify-center z-50';
        overlay.innerHTML = `
            <div class="bg-white rounded-2xl p-8 text-center shadow-2xl animate-[fadeIn_0.2s_ease]">
                <div class="mx-auto mb-4 w-16 h-16 rounded-full bg-green-100 flex items-center justify-center">
                    <i class="fa-solid fa-check text-green-600 text-3xl"></i>
                </div>
                <h3 class="text-2xl font-bold mb-2">Оплату прийнято</h3>
                <p class="text-gray-600 mb-6">Квиток надіслано на ваш email</p>
            </div>`;
        document.body.appendChild(overlay);
        setTimeout(()=>{ window.location.href = 'index.html#home'; }, 1500);
    });

    // basic seat selection
    document.querySelectorAll('.seat').forEach(btn=>{
        btn.addEventListener('click', ()=> btn.classList.toggle('bg-blue-100'));
    });

    // mobile menu
    const menuBtn = document.getElementById('menuBtn');
    const mobileMenu = document.getElementById('mobileMenu');
    const closeMobileMenu = document.getElementById('closeMobileMenu');
    if(menuBtn && mobileMenu){ menuBtn.addEventListener('click', ()=> mobileMenu.classList.toggle('hidden')); }
    if(closeMobileMenu && mobileMenu){ closeMobileMenu.addEventListener('click', ()=> mobileMenu.classList.add('hidden')); }
    </script>
</body>
</html>

